{% extends "site.twig" %} 

{% block title %}Draft - Overview{% endblock %} 

{% block injectCSS %}
<style>
.droptrue {
	min-height: 10px;
}

</style>
{% endblock %}

{% block bccontainer %}		
	{% include "widgets/breadcrumb.panel.twig" %}
	    <li><div class="btn-group">
    	<a href="{{ urlFor('me.drafts',{"idt":task.id}) }}" class="btn btn-small" >
    		<i class="icon-pencil"></i><span class="hidden-phone hidden-tablet"> {{ task.name }}</span></a>
	</div></li>
	<li><div class="btn-group">
    	<button class="btn btn-small active disabled">Overview</button>
    	<a href="{{ urlFor('me.draft.keywords',{"draft":draft.id}) }}" class="btn btn-small" >Keywords</a>
    	<button class="btn btn-small">Sentences</button>
    	<button class="btn btn-small">Stats</button>
    </div></li>
{% endblock %}

{% block content %}
<div class="row-fluid"><div class="span12">

<div class="widget">
<div class="widget-header"><i class="icon-list-alt"></i><h3>Keywords</h3></div>	

<div class="widget-toolbar">
	<div class="btn-toolbar">    
	<div class="btn-group">
    				<button id="catg-Save" class="btn btn-mini btn-primary">Save</button>
    				<button id="catg-Reset" class="btn btn-mini disabled">Reset</button>
    				</div>

    				<div class="btn-group">
    				<button id="catg-New" class="btn btn-mini">New Category...</button>
    			</div>
    		</div>
</div>


<div class="widget-content">
	<div class="row-fluid">
		<div class="span3 widget-content-allcat">
			<div class="widget-header"><h3>All</h3></div>
			
			<div class="widget-content">
				<ul class="droptrue connectedSortable ui-sortable" id="category_all">
					<li>fdfdfdfd</li>
					<li>fdfdfdfd</li>
					<li>fdfdfdfd</li>
				</ul>
			</div>
		</div>
	

		<div class="span9 widget-content-cats" id="widget-content-cats">
			
			<div class="row-fluid">
			{% for nitem in 0..(random(1)+2)  %}
			{% if nitem!=0 and nitem%2 == 0 %}
				</div>
				<div class="row-fluid">
				{% endif %}
				<div class="span6">
					<div class="widget-header"><h3>Cat. {{ nitem }}</h3>
						<div class="box-icon">
							<a href="#" class="btn-setting"><i class="icon-wrench"></i></a>
							<a href="#" class="btn-close"><i class="icon-remove"></i></a>
						</div>
					</div>
					<div class="widget-content">
						<ul class="droptrue connectedSortable ui-sortable" id="category_{{ nitem }}">
							<li>fdfdfdfd</li>
							<li>fdfdfdfd</li>
							<li>fdfdfdfd</li>
						</ul>
					</div>
				</div>
			{% endfor %}
			</div>
				
		</div>	
	
	
	
	</div>		
</div>
	
			
		
</div>
</div></div>

<div class="span6 hide" id="cat_template">
	<div class="widget-header"><h3></h3>
		<div class="box-icon">
			<a href="#" class="btn-setting"><i class="icon-wrench"></i></a>
			<a href="#" class="btn-close"><i class="icon-remove"></i></a>
		</div>
		</div>
	<div class="widget-content" id="">
		<ul class="droptrue connectedSortable ui-sortable" id="">
		</ul>
	</div>
</div>

{% endblock %}


{% block injectJS %}
<script>
$(document).ready(function() {
	//initialise the blockUI widget on AJAX calls
	$(document).ajaxStart($.blockUI).ajaxStop($.unblockUI);

	// set the dropable widgets
	$(".droptrue").sortable({
		connectWith : ".connectedSortable",
		placeholder : "ui-state-highlight",
		update : function(event, ui) {
			var order = $(this).sortable('toArray').toString();
			console.log(this.id + " " + order);
		}
	});
	$(".droptrue").disableSelection();
	
	$("#catg-New").click(function(e) {
		console.log("new category...");

		var holder = $('.widget-content-cats > .row-fluid :last');
		var n = holder.children().length;
		
		var cat = $('#cat_template').clone();
		cat.removeClass('hide');
		if (n==1)
		{
			cat.appendTo(holder);
		}
		else
		{
			var newElement = $('<div class="row-fluid"></div>');
			cat.appendTo(newElement);
			
			newElement.appendTo("#widget-content-cats");
			// set the dropable widgets
			$(".droptrue").sortable({
				connectWith : ".connectedSortable",
				placeholder : "ui-state-highlight",
				update : function(event, ui) {
					var order = $(this).sortable('toArray').toString();
					console.log(this.id + " " + order);
				}
			});
			$(".droptrue").disableSelection();
			
		}
	});
});

</script>

{% endblock %}